<!DOCTYPE html>
<html lang="pt-br" style="scroll-behavior: smooth">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>PayFly</title>
        <!-- ======= Estilos ====== -->
        <link rel="icon" type="image/png" href="views/imgs/Favicon.png" />
        <link rel="stylesheet" href="views/css/index.css" />
        <link rel="stylesheet" href="assets/css/accessibility.css" />
        <link
            href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;700&display=swap"
            rel="stylesheet"
        />
    </head>
    <body>
        <!-- =============== Barra de Acessibilidade Flutuante =============== -->
        <div class="accessibility-bar">
            <button
                class="accessibility-toggle-btn"
                id="accessibility-toggle"
                title="Acessibilidade"
            >
                <ion-icon name="accessibility-outline"></ion-icon>
            </button>
            <div class="accessibility-controls" id="accessibility-controls">
                <button
                    class="accessibility-btn"
                    id="decrease-font-btn"
                    title="Diminuir fonte (Ctrl + -)"
                >
                    <ion-icon name="remove-outline"></ion-icon>
                </button>
                <span class="font-size-display" id="font-size-display"
                    >16px</span
                >
                <button
                    class="accessibility-btn"
                    id="increase-font-btn"
                    title="Aumentar fonte (Ctrl + +)"
                >
                    <ion-icon name="add-outline"></ion-icon>
                </button>
                <button
                    class="accessibility-btn"
                    id="reset-font-btn"
                    title="Resetar fonte (Ctrl + 0)"
                >
                    <ion-icon name="refresh-outline"></ion-icon>
                </button>
                <div class="accessibility-divider"></div>
                <button
                    class="accessibility-btn"
                    id="theme-toggle-btn"
                    title="Alternar tema (Ctrl + Shift + T)"
                >
                    <ion-icon name="moon-outline"></ion-icon>
                </button>
            </div>
        </div>

        <!-- Cabe√ßalho -->
        <div class="container">
            <!-- Garante que todos os itens da barra do cabe√ßalho fiquem contidos dentro dele -->
            <div class="fixed-header" id="fixed-header">
                <!-- Define os itens compondo o cabe√ßalho -->

                <!-- Icone do menu, importado com ion-icon -->
                <div class="menu-icon" onclick="toggleMenu()">
                    <ion-icon name="menu-outline"></ion-icon>
                </div>
                <!-- Textos do Menu -->
                <a href="#" class="item-menu">
                    <div class="text-menu">IN√çCIO</div>
                </a>
                <a href="#quem-somos" class="item-menu">
                    <div class="text-menu">QUEM SOMOS</div>
                </a>
                <a href="#contato" class="item-menu">
                    <div class="text-menu">CONTATO</div>
                </a>
                <!-- Avatar do usu√°rio ou bot√£o de login -->
                <div class="user-menu" id="userMenu">
                    <button
                        class="user-avatar"
                        id="userAvatar"
                        title="Clique para acessar a conta"
                    >
                        EN
                    </button>
                </div>
            </div>
        </div>
        <!-- Scripts relacionados ao cabe√ßalho -->
        <script>
            // Menu toggle functionality
            function toggleMenu() {
                const items = document.querySelectorAll(
                    ".item-menu:not(.menu-icon)"
                );
                const fixedHeader = document.getElementById("fixed-header");
                const menuIcon = document.querySelector(".menu-icon");

                // Toggle menu items
                items.forEach((item) => {
                    item.classList.toggle("show");
                });

                // Check if menu is visible
                const isVisible = items[0].classList.contains("show");

                // Update header style
                fixedHeader.style.backgroundColor = "white";
                fixedHeader.style.boxShadow = isVisible
                    ? "0 2px 5px rgba(0,0,0,0.1)"
                    : "none";

                // Optional: Animate menu icon
                menuIcon.style.transform = isVisible
                    ? "rotate(90deg)"
                    : "rotate(0)";
                menuIcon.style.transition = "transform 0.3s ease";
            }

            // Handle window resize
            let isMobileView = window.innerWidth <= 768;

            window.addEventListener("resize", function () {
                const wasMobile = isMobileView;
                isMobileView = window.innerWidth <= 768;

                // Only toggle if we're crossing the breakpoint
                if (wasMobile !== isMobileView) {
                    const items = document.querySelectorAll(
                        ".item-menu:not(.menu-icon)"
                    );

                    if (!isMobileView) {
                        // Switching to desktop
                        items.forEach((item) => {
                            item.classList.remove("show");
                            item.classList.remove("hide");
                        });
                    } else {
                        // Switching to mobile
                        items.forEach((item) => {
                            item.classList.remove("show");
                            item.classList.add("hide");
                        });
                    }
                }
            });

            // Avatar din√¢mico - mostra inicial do usu√°rio ou bot√£o entrar/cadastrar
            const userAvatar = document.getElementById("userAvatar");

            async function updateUserAvatar() {
                try {
                    // Verificar sess√£o atual no Supabase
                    if (window.supabase && window.supabase.auth) {
                        const {
                            data: { session },
                        } = await window.supabase.auth.getSession();

                        console.log(
                            "üîç Sess√£o Supabase:",
                            session ? "ATIVO" : "INATIVO"
                        );

                        if (session && session.user) {
                            // Usu√°rio logado - mostrar inicial
                            const email = session.user.email || "";
                            const userName =
                                session.user.user_metadata?.full_name ||
                                session.user.user_metadata?.name ||
                                email.split("@")[0];
                            const initial = userName.charAt(0).toUpperCase();

                            console.log("üë§ Usu√°rio encontrado:", userName);

                            userAvatar.textContent = initial;
                            userAvatar.classList.add("logged-in");
                            userAvatar.classList.remove("login-button");
                            userAvatar.style.fontSize = "18px";
                            userAvatar.style.padding = "0";
                            userAvatar.style.width = "45px";
                            userAvatar.style.height = "45px";
                            userAvatar.style.borderRadius = "50%";
                            userAvatar.title = `Ol√°, ${userName}! Clique para acessar sua conta`;
                            userAvatar.onclick = () =>
                                (window.location.href = "views/Painel.html");
                            console.log("‚úÖ Avatar atualizado para LOGADO");
                            return;
                        }
                    } else {
                        console.log("‚ö†Ô∏è Supabase n√£o est√° dispon√≠vel");
                    }
                } catch (error) {
                    console.error(
                        "‚ùå Erro ao verificar sess√£o:",
                        error.message
                    );
                }

                // Usu√°rio n√£o logado - mostrar bot√£o "Entrar / Cadastrar"
                console.log("üîì Nenhuma sess√£o encontrada, mostrando bot√£o");
                userAvatar.textContent = "Entrar / Cadastrar";
                userAvatar.classList.remove("logged-in");
                userAvatar.classList.add("login-button");
                userAvatar.style.fontSize = "14px";
                userAvatar.style.padding = "10px 20px";
                userAvatar.style.width = "auto";
                userAvatar.style.height = "auto";
                userAvatar.style.borderRadius = "5px";
                userAvatar.title = "Clique para fazer login ou cadastro";
                userAvatar.onclick = () =>
                    (window.location.href = "views/Login.html");
                console.log("‚úÖ Avatar atualizado para DESLOGADO");
            }

            // Executar ao carregar a p√°gina com pequeno delay para garantir que Supabase carregou
            setTimeout(() => {
                console.log("üöÄ Iniciando verifica√ß√£o de avatar...");
                updateUserAvatar();
            }, 500);

            // Atualizar avatar quando houver mudan√ßas na autentica√ß√£o
            if (window.supabase && window.supabase.auth) {
                window.supabase.auth.onAuthStateChange((event, session) => {
                    console.log("üîÑ Auth state changed:", event);
                    updateUserAvatar();
                });
            }

            // Tamb√©m verificar periodicamente (a cada 3 segundos)
            setInterval(() => {
                updateUserAvatar();
            }, 3000);
        </script>

        <!-- Primeira se√ß√£o da pagina -->
        <div class="central-div">
            <div class="ellipse"></div>
            <div class="payfly-section">
                <h1 class="payfly-title">PayFly</h1>
                <p class="payfly-subtitle">
                    Sistema de Gest√£o Financeira Pessoal com IA
                </p>
                <img
                    class="central-image"
                    src="views/imgs/pages/libelula.svg"
                    alt="Imagem Central"
                />
                <p class="payfly-tagline">
                    Transforme sua rela√ß√£o com dinheiro atrav√©s de intelig√™ncia
                    artificial, arquitetura moderna e experi√™ncia intuitiva
                </p>
            </div>
            <div class="links-and-logo">
                <a href="https://www.instagram.com/accounts/login/" class="link"
                    >INSTAGRAM</a
                >
                <a
                    href="https://br.linkedin.com/?src=go-pa&trk=sem-ga_campid.12619604099_asid.149519181115_crid.657343811713_kw.linkedin_d.c_tid.kwd-148086543_n.g_mt.e_geo.1001581&mcid=6821526239111716925&cid=&gad_source=1&gclid=EAIaIQobChMI2qmk86jOhQMVLAKtBh0zrQ1NEAAYASAAEgJ3v_D_BwE&gclsrc=aw.ds"
                    class="link"
                    >LINKEDIN</a
                >
                <img src="views/imgs/pages/logo.png" alt="Logo" class="logo" />
            </div>
        </div>

        <!-- Se√ß√£o "Quem Somos?" da pagina -->
        <div id="quem-somos" class="quem-somos-section">
            <div class="quem-somos-content">
                <div class="text">
                    <h2>Quem Somos</h2>
                    <p>
                        Gerenciar suas despesas nunca foi t√£o f√°cil e eficiente
                        como agora. Seja voc√™ um indiv√≠duo preocupado em
                        controlar seu or√ßamento pessoal ou um empres√°rio
                        buscando otimizar as finan√ßas da sua empresa, estamos
                        aqui para simplificar esse processo para voc√™.
                    </p>
                </div>
                <img
                    src="views/imgs/pages/compras 1.png"
                    alt="Imagem"
                    class="quem-somos-image"
                />
            </div>
        </div>

        <!-- Se√ß√£o do bot√£o de cadastro -->
        <div class="call-to-action-section">
            <div class="call-to-action-content">
                <h2>Se interessou? N√£o perca mais tempo!</h2>
                <p>
                    Registre-se agora no aplicativo da PayFly e comece a dominar
                    suas despesas com facilidade e efici√™ncia.
                </p>
                <a href="views/Cadastro.html" class="cta-button"
                    ><ion-icon name="arrow-redo-outline"></ion-icon> Cadastre-se
                    j√°</a
                >
            </div>
        </div>

        <!-- Se√ß√£o de dados de contato da pagina -->
        <div id="contato" class="contato-section">
            <div class="contato-left">
                <h2>Contatos</h2>
                <div class="contato-item">
                    <ion-icon name="business"></ion-icon>
                    <p>Para empresas</p>
                    <p>empresa@payfly.com.br</p>
                </div>
                <div class="contato-item">
                    <ion-icon name="person"></ion-icon>
                    <p>Para colaboradores</p>
                    <p>falecom@payfly.com.br</p>
                </div>
                <div class="contato-item">
                    <ion-icon name="newspaper"></ion-icon>
                    <p>Imprensa</p>
                    <p>imprensa@payfly.com.br</p>
                </div>
            </div>
            <div class="contato-right">
                <img
                    src="views/imgs/pages/Group 1Libelulas 1.svg"
                    alt="Logo"
                    class="logo"
                />
            </div>
        </div>

        <!-- Rodap√© -->
        <div class="footer-container">
            <footer class="footer">
                <div class="footer-column">
                    <img
                        src="views/imgs/pages/logo2.svg"
                        alt="Logo"
                        width="180"
                        height="180"
                    />
                </div>
                <div class="footer-column">
                    <p>Pol√≠tica de privacidade</p>
                    <p>Central de ajuda</p>
                    <p>Seja parceiro</p>
                    <p>Trabalhe conosco</p>
                    <p>Canal de √©tica</p>
                    <p>Pol√≠tica de seguran√ßa</p>
                </div>
                <div class="footer-column">
                    <p>CNPJ 95.690.622/0001-03</p>
                    <p>Rua Joaquim Fernandes Veloso, 242</p>
                    <p>Centro, Passos/MG</p>
                    <p>CEP: 37900-000</p>
                    <p>falecom@payfly.com.br</p>
                    <p>(35) 3753-4647</p>
                    <p>Release License | Payfly ¬© 2024</p>
                </div>
                <!-- Icones de redes sociais do rodap√© -->
                <div class="footer-column social-icons">
                    <a
                        href="https://www.instagram.com/accounts/login/"
                        aria-label="Instagram"
                    >
                        <ion-icon name="logo-instagram"></ion-icon>
                    </a>
                    <a href="https://br.linkedin.com/" aria-label="LinkedIn">
                        <ion-icon name="logo-linkedin"></ion-icon>
                    </a>
                    <a href="#" aria-label="WhatsApp">
                        <ion-icon name="logo-whatsapp"></ion-icon>
                    </a>
                </div>
            </footer>
        </div>

        <!-- ====== ionicons ======= -->
        <script
            type="module"
            src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"
        ></script>
        <script
            nomodule
            src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"
        ></script>

        <!-- ====== Injetor de Acessibilidade ======= -->
        <script src="controllers/accessibility-injector.js"></script>

        <!-- ====== Sistema de Acessibilidade ======= -->
        <script src="controllers/accessibility.js"></script>
    </body>
</html>
